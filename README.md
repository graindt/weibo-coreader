# 微博辅助分析工具 - 最小可行产品（MVP）功能说明

## **核心功能**

1. **微博页面按钮注入**
   - 在微博详情页的每条微博下方自动插入「分析」按钮。
   - 支持主流微博页面布局（PC端网页版）。

2. **大模型分析功能**
   - 点击按钮后自动抓取当前微博的文本内容。
   - 调用预设的大模型API进行分析， ollama。
   - 默认分析模式：
     - 情感倾向判断
     - 关键信息提取

3. **自定义提示词**
   - 用户可通过扩展设置页配置自定义提示词模板。
   - 示例模板：
     ```plaintext
     "请分析这条微博的{语气/情感/传播潜力}，并给出{3}个关键点"
     "判断这条微博是否存在{不实信息/敏感内容}"
     "请分析这条微博的事实和观点"
     ```

---

## **用户流程**

1. 安装扩展后，打开任意微博详情页。
2. 每条微博下方显示「分析」按钮。
3. 点击按钮触发：
   - 抓取微博正文 → 发送API请求 → 接收分析结果。
4. 结果展示在按钮下方弹窗中。
5. 通过扩展图标进入设置页可修改：
   - API Key（用户需自行申请）。
   - 默认提示词模板。
   - 结果展示样式。

---

## **技术实现要点**

| 模块         | 实现方案                                                                 |
|--------------|--------------------------------------------------------------------------|
| 按钮注入     | 通过content script监听DOM变化，使用`MutationObserver`动态添加按钮。       |
| 内容抓取     | 正则匹配 + 微博页面DOM特征选择器（如`.weibo-text`类）。                   |
| API调用      | 使用`fetch`请求代理服务器（解决跨域），添加API Key鉴权。                  |
| 结果缓存     | 使用`chrome.storage`本地缓存最近10条分析结果。                           |
| 错误处理     | 网络错误/文本过长/API限流时显示友好提示。                                |

---

## **MVP边界**

- **不包含**：
  - 图片/视频内容分析。
  - 多模型切换。
  - 批量分析。
- **暂不支持**：移动端网页适配。
- **安全设计**：API Key加密存储于`chrome.storage.local`。

---

## **后续扩展方向**

1. 模型对比功能（同时调用多个大模型）。
2. 实时舆情看板（聚合分析结果）。
3. 自动标签生成 + 相似内容推荐。
4. 企业版API流量监控面板。
